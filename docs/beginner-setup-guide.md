# 🔰 初心者向け OpenAI API セットアップガイド

このガイドでは、プログラミング初心者の方でもOpenAI APIを使えるようになるまでの手順を、スクリーンショット付きで詳しく説明します。

## 📋 事前準備

### 必要なもの
- [ ] **クレジットカード**（VISA、MasterCard、JCBなど）
- [ ] **メールアドレス**（Gmail、Yahoo!メールなど）
- [ ] **携帯電話番号**（SMS認証用）
- [ ] **予算**: 月額1,000円程度から開始推奨

### 時間の目安
- アカウント作成: 5分
- 課金設定: 10分
- APIキー作成: 3分
- **合計: 約20分**

## ステップ1: OpenAI アカウント作成

### 1-1. OpenAI Platform にアクセス
1. ブラウザで https://platform.openai.com/signup を開く
2. 「Sign up」をクリック

### 1-2. アカウント情報入力
```
📝 入力項目：
- Email address: あなたのメールアドレス
- Password: 8文字以上の複雑なパスワード
- Full name: 氏名（ローマ字）
- Date of birth: 生年月日
- Organization: 空欄でOK（個人利用の場合）
```

### 1-3. 電話番号認証
1. 携帯電話番号を入力（+81から始まる日本の番号）
2. SMSで送られてくる6桁のコードを入力

### 1-4. メール認証
1. 登録したメールアドレスに認証メールが届く
2. メール内の「Verify email address」をクリック

✅ **チェックポイント**: ログイン後、OpenAI Platformのダッシュボードが表示される

## ステップ2: 課金設定（重要！）

### 2-1. 課金ページにアクセス
1. 左メニューから「**Billing**」をクリック
2. 「**Overview**」タブを確認

### 2-2. 無料クレジットの確認
```
💡 表示される情報：
- Free trial credit: $5.00（無料枠）
- Usage: $0.00（使用量）
- 有効期限: 通常3ヶ月
```

### 2-3. 支払い方法の設定
1. 「**Set up paid account**」をクリック
2. クレジットカード情報を入力：
   ```
   📝 入力項目：
   - Card number: カード番号（16桁）
   - Expiry date: 有効期限（MM/YY）
   - CVC: セキュリティコード（3桁）
   - Name on card: カード名義人
   - Country: Japan
   - Address: 請求先住所
   ```
3. 「**Set up payment method**」をクリック

### 2-4. 使用制限の設定（推奨）
1. 「**Usage limits**」をクリック
2. 「**Monthly budget**」を設定:
   ```
   💰 推奨設定：
   - Soft limit: $10（警告が来る金額）
   - Hard limit: $20（利用停止される金額）
   ```
3. 「**Save**」をクリック

### 2-5. 自動チャージ設定（オプション）
**自動チャージとは？**
残高が少なくなったら自動的にクレジットを追加する機能です。

1. 「**Auto-recharge**」をクリック
2. 自動チャージを設定:
   ```
   🔄 推奨設定（初心者向け）：
   - When credit balance goes below: $5
     （残高が$5を下回ったら）
   - Automatically recharge: $10
     （自動的に$10をチャージ）
   - Monthly auto-recharge limit: $50
     （月間チャージ上限$50）
   ```

**自動チャージのメリット・デメリット：**
```
✅ メリット：
- APIが突然止まることを防ぐ
- 手動でチャージする手間が省ける

⚠️ 注意点：
- 使いすぎの可能性
- 月間上限設定が重要
- 初心者は手動チャージから始めることを推奨
```

3. 設定を確認して「**Save**」をクリック

✅ **チェックポイント**: 「Payment method successfully added」と表示される

## ステップ3: プロジェクト作成

### 3-1. プロジェクトページにアクセス
1. 左メニューから「**Projects**」をクリック
2. 「**Create new project**」をクリック

### 3-2. プロジェクト情報入力
```
📝 入力項目：
- Project name: y2clip-project（任意の名前）
- Description: YouTube video transcription（説明）
```

### 3-3. プロジェクト設定
1. 作成したプロジェクトをクリック
2. 「**Settings**」タブで権限を確認
3. 「**Models**」で「Audio」が有効になっていることを確認

✅ **チェックポイント**: プロジェクトダッシュボードが表示される

## ステップ4: APIキー作成

### 4-1. APIキーページにアクセス
1. プロジェクト内で「**API Keys**」をクリック
2. 「**Create new secret key**」をクリック

### 4-2. APIキー設定
```
📝 入力項目：
- Name: y2clip-api-key（任意の名前）
- Scope: Project（選択済み）
- Permissions: All（すべての権限）
```

### 4-3. APIキーのコピー
1. 「**Create secret key**」をクリック
2. **重要**: 表示されたAPIキーをコピー
   ```
   ⚠️ 注意：このAPIキーは二度と表示されません！
   必ずメモ帳などに保存してください
   
   例: sk-proj-1234567890abcdef...
   ```

✅ **チェックポイント**: APIキーが `sk-proj-` で始まっている

## ステップ5: 動作確認

### 5-1. アカウント状況確認
1. y2clipプロジェクトフォルダで以下を実行：
   ```bash
   # .envファイルにAPIキーを設定
   echo "OPENAI_API_KEY=あなたのAPIキー" > .env
   
   # アカウント状況を確認
   node check_account_status.js
   ```

### 5-2. 期待される結果
```
✅ 成功例：
📊 OpenAI アカウント状況確認...

1. APIキー情報
   形式: sk-proj-...1234
   長さ: 164文字
   タイプ: プロジェクトキー

2. モデルアクセス確認
   ✅ API接続成功
   ✅ Whisperモデル利用可能
      - whisper-1

3. 課金状況の推測
   ✅ 正常なレスポンス時間（課金アカウントの可能性大）
   ✅ レート制限なし（課金アカウントの可能性）

4. Whisper API権限確認
   ✅ Whisper API権限あり（ファイル関連エラー）
```

## ❌ よくあるエラーと解決法

### エラー1: 「401 Unauthorized」
```
原因: APIキーが正しく設定されていない
解決: .envファイルのAPIキーを確認
```

### エラー2: 「429 Too Many Requests」
```
原因: レート制限（無料枠または課金未設定）
解決: 課金設定を完了させる
```

### エラー3: 「Payment method required」
```
原因: 支払い方法が設定されていない
解決: ステップ2-3を再実行
```

### エラー4: 「ECONNRESET」（ファイルアップロード時）
```
原因: ネットワーク環境による接続問題
解決策:
1. 別のネットワーク（テザリングなど）で試す
2. VPNの無効化
3. プロキシ設定の確認
4. 時間を置いて再試行

※これは環境固有の問題で、課金設定とは無関係です
```

### エラー5: 「You exceeded your current quota」
```
原因: クレジット残高不足または使用量上限到達
解決策:
1. 残高確認: Billing > Overview で残高をチェック
2. 手動チャージ: Billing > Add credits で追加購入
3. 自動チャージ設定: Auto-recharge の有効化
4. 使用量上限確認: Usage limits の見直し
```

## 📊 料金の目安

### 実際の使用例
| 動画の長さ | Whisper API料金 | 日本円（150円/ドル） |
|-----------|----------------|---------------------|
| 1分       | $0.006         | 約1円               |
| 5分       | $0.030         | 約5円               |
| 10分      | $0.060         | 約9円               |
| 30分      | $0.180         | 約27円              |

### 月額予算の例
```
💰 利用パターン別の月額目安：
- 軽度利用（10分/日）: 約300円/月
- 中度利用（30分/日）: 約800円/月  
- 重度利用（60分/日）: 約1,600円/月
```

## 🆘 サポート情報

### 困った時の連絡先
- **OpenAI ヘルプセンター**: https://help.openai.com/
- **課金関連**: billing@openai.com
- **技術的な問題**: プラットフォーム内のサポートチケット

### セルフチェックリスト
- [ ] アカウント作成完了
- [ ] 課金設定完了（クレジットカード登録）
- [ ] 使用量制限設定完了
- [ ] 自動チャージ設定確認（必要に応じて）
- [ ] プロジェクト作成完了
- [ ] APIキー作成・保存完了
- [ ] 動作確認完了

### 料金管理のベストプラクティス
```
💡 初心者向け推奨設定：

1. 最初は手動チャージで様子見
   - 自動チャージは慣れてから設定

2. 少額から開始
   - 月間予算: $10-20程度
   - チャージ単位: $5-10程度

3. 定期的な確認
   - 週1回は使用量をチェック
   - 予想以上に使っていないか確認

4. 段階的な拡大
   - 使用パターンが分かってから予算増加
```

## 🎉 完了！

これでOpenAI APIを使用する準備が整いました！
y2clipアプリケーションでYouTube動画の音声認識を試してみましょう。

```bash
# サーバーを起動
npm run dev

# ブラウザでアクセス
open http://localhost:3000
```

何か問題が発生した場合は、`docs/openai-billing-setup.md` の詳細ドキュメントも参照してください。