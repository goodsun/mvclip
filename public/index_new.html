<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Clip Subtitles - プロジェクト管理</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- サイドバー: プロジェクト一覧 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>📁 プロジェクト</h2>
                <button id="new-project-btn" class="new-project-btn">+ 新規作成</button>
            </div>
            
            <div class="project-list" id="project-list">
                <!-- プロジェクト一覧がここに動的に表示される -->
            </div>
        </div>
        
        <!-- メインコンテンツ -->
        <div class="main-content">
            <!-- プロジェクト未選択時 -->
            <div id="no-project-selected" class="welcome-screen">
                <div class="welcome-content">
                    <h1>🎬 YouTube Clip Subtitles</h1>
                    <p>左のサイドバーからプロジェクトを選択するか、新規作成してください</p>
                    <button class="primary-btn" onclick="document.getElementById('new-project-btn').click()">
                        新しいプロジェクトを作成
                    </button>
                </div>
            </div>
            
            <!-- プロジェクト選択時 -->
            <div id="project-workspace" class="workspace" style="display: none;">
                <!-- プロジェクト情報ヘッダー -->
                <div class="project-header">
                    <div class="project-info">
                        <h1 id="project-title">プロジェクト名</h1>
                        <div class="project-meta">
                            <span id="project-duration">0:00</span>
                            <span class="separator">•</span>
                            <span id="project-status">準備中</span>
                        </div>
                    </div>
                    <div class="project-actions">
                        <button id="delete-project-btn" class="danger-btn">🗑️ 削除</button>
                    </div>
                </div>
                
                <!-- タブナビゲーション -->
                <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="download">📥 ダウンロード</button>
                    <button class="tab-btn" data-tab="preview">👁️ プレビュー</button>
                    <button class="tab-btn" data-tab="analyze">🔍 字幕解析</button>
                    <button class="tab-btn" data-tab="edit">✂️ 動画編集</button>
                </div>
                
                <!-- ダウンロードタブ -->
                <div id="download-tab" class="tab-content active">
                    <div class="download-section">
                        <h3>📹 動画ダウンロード</h3>
                        
                        <div class="input-group">
                            <label for="project-url">YouTube URL:</label>
                            <input type="text" id="project-url" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                        
                        <div class="input-group">
                            <label>解析範囲 (任意):</label>
                            <div class="time-range">
                                <input type="text" id="project-start-time" placeholder="0:00.000">
                                <span>〜</span>
                                <input type="text" id="project-end-time" placeholder="5:00.000">
                            </div>
                        </div>
                        
                        <div class="download-buttons">
                            <button id="create-project-btn" class="primary-btn">🚀 プロジェクト作成・ダウンロード開始</button>
                        </div>
                        
                        <div id="download-progress" class="progress-section" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text"></p>
                        </div>
                        
                        <!-- ダウンロード結果 -->
                        <div class="download-results">
                            <div class="video-file-card">
                                <div class="file-header">
                                    <h4>🎬 高画質版（編集用）</h4>
                                    <span id="high-quality-status" class="status-badge">未ダウンロード</span>
                                </div>
                                <div class="file-info" id="high-quality-info">
                                    <p>動画編集で使用する高画質版です</p>
                                </div>
                            </div>
                            
                            <div class="video-file-card">
                                <div class="file-header">
                                    <h4>📝 解析用（字幕生成用）</h4>
                                    <span id="analysis-status" class="status-badge">未ダウンロード</span>
                                </div>
                                <div class="file-info" id="analysis-info">
                                    <p>音声認識で字幕を生成する際に使用します</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- プレビュータブ -->
                <div id="preview-tab" class="tab-content">
                    <div class="preview-section">
                        <h3>👁️ 動画プレビュー</h3>
                        
                        <div class="preview-selector">
                            <label>プレビューする動画:</label>
                            <select id="preview-select">
                                <option value="high">🎬 高画質版（編集用）</option>
                                <option value="analysis">📝 解析用（字幕生成用）</option>
                            </select>
                        </div>
                        
                        <div class="video-preview">
                            <video id="preview-video" controls width="100%" style="max-width: 800px;">
                                <p>動画がダウンロードされていません</p>
                            </video>
                        </div>
                        
                        <div class="video-details" id="video-details">
                            <!-- 動画の詳細情報がここに表示される -->
                        </div>
                    </div>
                </div>
                
                <!-- 字幕解析タブ -->
                <div id="analyze-tab" class="tab-content">
                    <div class="analyze-section">
                        <h3>🔍 字幕解析</h3>
                        <button id="start-analysis-btn" class="primary-btn">音声認識を開始</button>
                        
                        <div id="analysis-progress" class="progress-section" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text"></p>
                        </div>
                        
                        <div id="csv-result" class="result-section" style="display: none;">
                            <h4>CSV生成完了</h4>
                            <textarea id="csv-content" rows="15" cols="80"></textarea>
                            <div class="csv-actions">
                                <button id="download-csv" class="secondary-btn">CSVをダウンロード</button>
                                <button id="save-csv" class="primary-btn">プロジェクトに保存</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 動画編集タブ -->
                <div id="edit-tab" class="tab-content">
                    <div class="edit-section">
                        <h3>✂️ 動画編集</h3>
                        
                        <div class="csv-upload">
                            <label>CSVファイル:</label>
                            <select id="csv-source">
                                <option value="project">プロジェクト内のCSV</option>
                                <option value="upload">ファイルをアップロード</option>
                            </select>
                            
                            <input type="file" id="csv-upload-file" accept=".csv" style="display: none;">
                            <button id="load-csv-btn" class="secondary-btn">CSVを読み込み</button>
                        </div>
                        
                        <div class="csv-editor" style="display: none;">
                            <h4>CSV編集</h4>
                            <textarea id="csv-editor-content" rows="15" cols="80"></textarea>
                            <button id="process-video-btn" class="primary-btn">動画を処理</button>
                        </div>
                        
                        <div id="process-progress" class="progress-section" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text"></p>
                        </div>
                        
                        <div id="video-result" class="result-section" style="display: none;">
                            <h4>処理完了</h4>
                            <video id="result-video" controls width="100%" style="max-width: 800px;"></video>
                            <br>
                            <a id="download-final-video" class="primary-btn" download>動画をダウンロード</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 新規プロジェクト作成モーダル -->
    <div id="new-project-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>新しいプロジェクトを作成</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="new-project-url">YouTube URL:</label>
                    <input type="text" id="new-project-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                
                <div class="input-group">
                    <label>解析範囲 (任意):</label>
                    <div class="time-range">
                        <input type="text" id="new-project-start" placeholder="0:00.000">
                        <span>〜</span>
                        <input type="text" id="new-project-end" placeholder="5:00.000">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary-btn modal-close">キャンセル</button>
                <button id="confirm-create-project" class="primary-btn">作成</button>
            </div>
        </div>
    </div>
    
    <div id="error-message" class="error-message" style="display: none;"></div>
    
    <script src="script_new.js"></script>
</body>
</html>